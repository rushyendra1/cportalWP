!function(t,e){function i(t){var e=t,i=e.getWrapper(),n=e.options;return i.appendChild(e.getHeader()),i.appendChild(e.getContainer()),i.appendChild(e.getFooter()),""===n.title&&e.hideHeader(),e.title(n.title),e.content(n.content),e.addButton("取消","destory",function(){e.remove()}),n.modal&&e.showModal(),n.autoHide&&e.autoHide(n.autoHide),n.callBack&&e.addButton("确定","apply",n.callBack),i.addEventListener("click",o.bind(e),!1),i.addEventListener("touchstart",r,!1),i.addEventListener("touchend",r,!1),u.body.appendChild(i),e.verticalInViewPort(n.fixed).addClass("dialog-zoom-in"),e}function n(t,e){var i=u.createElement(t);return c.extend(i,e),i}function o(t){var e=t.target,i=e.getAttribute("data-dialog-action");i&&c.event.fire(i,e)}function r(t){var e=t.target,i=e.getAttribute("data-dialog-action");i&&e.classList.toggle("active")}function s(t){var e=t,i=n("div");return i.style.cssText=";background:rgba(0,0,0,0.3);width:100%;position:absolute;left:0;top:0;height:"+Math.max(u.documentElement.scrollHeight,u.body.scrollHeight)+"px;z-index:"+(e.currentDOMIndex-1),i.onclick=function(){e.options.preventHide||c.event.fire("destory")},u.body.appendChild(i)}function a(t){return"[object Function]"===Object.prototype.toString.call(t)}function h(t){return null===t||void 0===t?!1:t.constructor=={}.constructor}var d=t,u=e,l="1.0.0",c=function(t,e){return new c.fn.init(t,e)};c.fn=c.prototype={constructor:c,init:function(t,e){if(this.options={title:"提示",modal:!0,content:"",autoHide:0,fixed:!0,preventHide:!1,callBack:null},this.buttons=[],c.currentDialog&&c.currentDialog.remove(),c.currentDialog=this,h(t))c.extend(this.options,t);else{if(!/string|number|boolean/gi.test(typeof t))return this;this.options.content=t,a(e)&&(this.options.callBack=e)}return i(this)}},c.extend=c.fn.extend=function(){var t,e,i=arguments[0]||{},n=arguments[1]||{};1===arguments.length&&(i=this,n=arguments[0]);for(t in n)e=n[t],void 0!==e&&(i[t]=e);return i},c.fn.init.prototype=c.fn,c.extend({expando:"jDialog"+(l+Math.random()).replace(/\D/g,"")}),c.event={actions:{},add:function(t,e){return a(e)&&(this.actions[t]=e),this},remove:function(t){return this.has(t)?delete this.actions[t]:(console.warn(t+"不存在"),!1)},has:function(t){return"string"==typeof t&&this.actions[t]?!0:!1},once:function(t){return this.has(t)&&this.fire(t).remove(t),this},fire:function(t,e){return this.has(t)&&this.actions[t].call(e||d),this}},c.fn.extend({verticalInViewPort:function(t){var e=u.documentElement,i=e.clientHeight,n=this.height();if(t)n>i&&(n=.75*i,this.getContainer().style.height=n-(this.height(this.getHeader())+this.height(this.getFooter()))+"px"),this.height(n).toggleLockBody(!0).extend(this.getWrapper().style,{position:"fixed",marginTop:-n/2+"px",top:"50%"});else{var o=Math.max(u.body.scrollTop,e.scrollTop),r=Math.max(382*(i-n)/1e3+o,o);this.top(r).height("auto").toggleLockBody(!1).getContainer().style.height="auto"}return this},toggleLockBody:function(t){var e=this.getHeader(),i=this.getFooter(),n=this.getModal(),o="ontouchmove";return e[o]=i[o]=n[o]=t?function(){return!1}:null,this},getWrapper:function(){return this.wrapper||(this.wrapper=n("div",{className:"dialog"}),this.wrapper.style.zIndex=this.currentDOMIndex=614),this.wrapper},getHeader:function(){return this.header?this.header:this.header=n("div",{className:"dialog-header"})},hideHeader:function(){var t=this.getHeader(),e=this.height(t);return this.height(this.height()-e),t.style.display="none",this},getContainer:function(){return this.container?this.container:this.container=n("div",{className:"dialog-body"})},getFooter:function(){return this.footer?this.footer:this.footer=n("div",{className:"dialog-footer"})},hideFooter:function(){var t=this.getFooter(),e=this.height(t);return this.height(this.height()-e),t.style.display="none",this},addButton:function(t,e,i){var o=("jDialog"+Math.random()).replace(/\D/g,""),r="确定";if(a(t))return this.addButton(r,e||o,t);if(a(e))return this.addButton(t,o,e);var s=n("a",{href:"javascript:;",className:"dialog-btn",innerHTML:t||r});e?c.event.add(e,i):e="destory",s.setAttribute("data-dialog-action",e);var h=this.getFooter();return this.buttons.length?(this.addClass("dialog-btn-primary",s),h.insertBefore(s,h.childNodes.item(0))):h.appendChild(s),this.buttons.push(s),this},delButton:function(t){var e,i=this.getButton(t);if(i){e=i.getAttribute("data-dialog-action"),"destory"!=e&&c.event.remove(e),this.getFooter().removeChild(i);var n=this.buttons.indexOf(i);this.buttons.splice(n,1)}return this},getButton:function(t){var e=this.buttons.slice().reverse();return e[t]?e[t]:null},addClass:function(t,e){return e=e||this.getWrapper(),1===e.nodeType&&"string"==typeof t&&e.classList.add(t),this},removeClass:function(t,e){return e=e||this.getWrapper(),1===e.nodeType&&"string"==typeof t&&e.classList.remove(t),this},autoHide:function(t){return c.currentDialog?0==t?this.remove():void 0===t?this.autoHide(this.options.autoHide):(this.autoHideTimer&&clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){this.remove(),clearTimeout(this.autoHideTimer),this.autoHideTimer=null}.bind(this),1e3*t),this):this},remove:function(){return this.toggleLockBody(!1),this.wrapper&&(this.wrapper.removeEventListener("click",o,!1),this.wrapper.removeEventListener("touchstart",r,!1),this.wrapper.removeEventListener("touchend",r,!1),u.body.removeChild(this.wrapper)),this.modal&&(this.modal.onclick=null,u.body.removeChild(this.modal)),this.autoHideTimer&&clearTimeout(this.autoHideTimer),c.currentDialog=this.buttons=this.container=this.footer=this.header=this.options=this.wrapper=this.modal=null,this},getModal:function(){return this.modal||(this.modal=s(this)),this.modal},hideModal:function(){return this.getModal().style.display="none",this},showModal:function(){return this.getModal().style.display="",this},getCloseBtn:function(){return this.closeBtn||(this.closeBtn=n("span",{innerHTML:"关闭","data-dialog-action":"destory",className:"dialog-btn-dismiss"})),this.closeBtn}});var p=function(t){return/em|px|rem|pt|%|auto/gi.test(t)||(t+="px"),t};c.fn.extend({title:function(t){return"undefined"==typeof t?this.options.title:(this.getHeader().innerHTML=this.options.title=t,this)},content:function(t){return"undefined"==typeof t?this.options.content:(this.getContainer().innerHTML=this.options.content=t,this)},height:function(t){return"undefined"==typeof t?this.height(this.getWrapper()):1===t.nodeType?t.offsetHeight:(this.wrapper.style.height=p(t),this)},width:function(t){return"undefined"==typeof t?this.width(this.getWrapper()):1===t.nodeType?t.offsetWidth:(c.extend(this.wrapper.style,{width:p(t),marginLeft:p(-(parseFloat(t)/2))}),this)},index:function(t){return"undefined"==typeof t?this.currentDOMIndex:(this.currentDOMIndex=t,this.wrapper.style.zIndex=this.currentDOMIndex,this.getModal().style.zIndex=this.currentDOMIndex-1,this)},top:function(t){return"undefined"==typeof t?d.getComputedStyle(this.getWrapper()).top:(c.extend(this.wrapper.style,{top:p(t),marginTop:""}),this)},fixed:function(t){var e=!0;return t&&"undefined"==typeof t||(e=!1,this.getWrapper().style.position="absolute"),this.verticalInViewPort(e)},preventHide:function(){return this.options.preventHide=!0,this}}),c.extend({alert:function(t){return c(t)},toast:function(t,e){var i=c(t).addClass("dialog-toast"),n=i.getContainer(),o=i.height(n);return i.getContainer().style.textAlign="center",i.hideFooter().hideHeader().hideModal().height(o).autoHide(e||3),i},error:function(t,e){return c(t,e).addClass("dialog-error")}}),"function"==typeof define&&define.amd?define("jdialog",[],function(){return c}):d.jDialog=c}(window,window.document);